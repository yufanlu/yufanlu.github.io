<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>Setup Neovim as Python IDE · Yufan Lu</title><meta name="description" content="Setup Neovim as Python IDE - Yufan Lu"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yufanlu.net/atom.xml" title="Yufan Lu"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.ico" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">Blog</a></li><li class="nav-list-item"><a href="/about/" target="_self" class="nav-list-link">About</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">Archives</a></li><li class="nav-list-item"><a href="https://github.com/yufanlu" target="_blank" class="nav-list-link">GitHub</a></li><li class="nav-list-item"><a href="https://ca.linkedin.com/in/luyufan" target="_blank" class="nav-list-link">LinkedIn</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Setup Neovim as Python IDE</h1><div class="post-info">Sep 3, 2018<span class="post-meta-divider">|</span><a href="/categories/neovim/" class="post-category">neovim<span>,</span></a><a href="/categories/neovim/python/" class="post-category">neovim/python</a></div><div class="post-content"><p>This will be a quick guide on how to setup neovim as your python IDE. It might invovle some concepts, but they shouldn’t block your setup as long as you follow these steps (hopefully).</p>
<p>Here are the tools/software that we need:</p>
<ul>
<li>neovim</li>
<li>python3</li>
<li>git</li>
</ul>
<h2 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h2><p>You can install neovim according to the offical document <a href="https://github.com/neovim/neovim/wiki/Installing-Neovim" target="_blank" rel="noopener">here</a>. If you are using windows, you can always use the <a href="https://github.com/neovim/neovim/wiki/Installing-Neovim#install-from-download" target="_blank" rel="noopener">pre-built latest stable</a> release provided by the neovim team.</p>
<p>I am using neovim v0.3.1 at the time of writing showing as following:</p>
<img src="/2018/09/03/neovim-python/neovim.png">
<a id="more"></a>
<h2 id="Python3-and-Neovim-package"><a href="#Python3-and-Neovim-package" class="headerlink" title="Python3 and Neovim package"></a>Python3 and Neovim package</h2><p>You need to have python3 installed and also install <code>neovim</code> package using <code>pip</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pip install neovim</div></pre></td></tr></table></figure>
<p>and then we can check if we have successfully configured python component for neovim by running the following command<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">:echo has(&apos;python3&apos;)</div></pre></td></tr></table></figure></p>
<p>and check if it outputs <code>1</code> like the following,</p>
<img src="/2018/09/03/neovim-python/check-py3.gif">
<h2 id="Plugin-Manager"><a href="#Plugin-Manager" class="headerlink" title="Plugin Manager"></a>Plugin Manager</h2><p>There are many neovim/vim plugin managers like <a href="https://github.com/Shougo/dein.vim" target="_blank" rel="noopener">dein.vim</a> and <a href="https://github.com/junegunn/vim-plug" target="_blank" rel="noopener">vim-plug</a>. Here I am showing vim-plug in the below figures. If you are using windows and don’t have PowerShell, then you can <a href="https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim" target="_blank" rel="noopener">download the plug.vim</a> (as suggested by the <a href="https://github.com/junegunn/vim-plug" target="_blank" rel="noopener">vim-plug document</a>) and put it at </p>
<blockquote>
<p><code>~\AppData\Local\nvim\autoload</code></p>
</blockquote>
<h2 id="Configuration-file"><a href="#Configuration-file" class="headerlink" title="Configuration file"></a>Configuration file</h2><p>Create the following configuration file based on the system you use:</p>
<ul>
<li>Unix: <code>~/.config/nvim/init.vim</code></li>
<li>Windows: <code>~\AppData\Local\nvim\init.vim</code></li>
</ul>
<p>this file will store all of our configurations about neovim such as:</p>
<ul>
<li>UI related settings</li>
<li>certain behaviors you want neovim to behave</li>
<li>plugins and related settings</li>
</ul>
<p>Create the <code>init.vim</code> file in the above location if it’s not there yet.</p>
<h2 id="Plugin-Manager-1"><a href="#Plugin-Manager-1" class="headerlink" title="Plugin Manager"></a>Plugin Manager</h2><p>There are many neovim/vim plugin managers like <a href="https://github.com/Shougo/dein.vim" target="_blank" rel="noopener">dein.vim</a> and <a href="https://github.com/junegunn/vim-plug" target="_blank" rel="noopener">vim-plug</a>. Here I am showing vim-plug in the below figures. If you are using windows and don’t have PowerShell, then you can <a href="https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim" target="_blank" rel="noopener">download the plug.vim</a> (as suggested by the <a href="https://github.com/junegunn/vim-plug" target="_blank" rel="noopener">vim-plug document</a>) and put it at </p>
<blockquote>
<p><code>~\AppData\Local\nvim\autoload</code></p>
</blockquote>
<p>After we created the <code>init.vim</code> file, paste the following contents in it</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> <span class="built_in">has</span>(<span class="string">'win32'</span>) || <span class="built_in">has</span>(<span class="string">'win64'</span>)</div><div class="line">  <span class="keyword">let</span> <span class="variable">g:plugged_home</span> = <span class="string">'~/AppData/Local/nvim/plugged'</span></div><div class="line"><span class="keyword">else</span></div><div class="line">  <span class="keyword">let</span> <span class="variable">g:plugged_home</span> = <span class="string">'~/.vim/plugged'</span></div><div class="line"><span class="keyword">endif</span></div><div class="line"></div><div class="line"><span class="comment">" Plugins</span></div><div class="line"><span class="keyword">call</span> plug#begin(<span class="variable">g:plugged_home</span>)</div><div class="line"></div><div class="line">  <span class="comment">" UI related</span></div><div class="line">  Plug <span class="string">'chriskempson/base16-vim'</span></div><div class="line">  Plug <span class="string">'vim-airline/vim-airline'</span></div><div class="line">  Plug <span class="string">'vim-airline/vim-airline-themes'</span></div><div class="line"></div><div class="line">  <span class="comment">" Better Visual Guide</span></div><div class="line">  Plug <span class="string">'Yggdroot/indentLine'</span></div><div class="line"></div><div class="line">  <span class="comment">" syntax check</span></div><div class="line">  Plug <span class="string">'w0rp/ale'</span></div><div class="line"></div><div class="line">  <span class="comment">" Autocomplete</span></div><div class="line">  Plug <span class="string">'ncm2/ncm2'</span></div><div class="line">  Plug <span class="string">'roxma/nvim-yarp'</span></div><div class="line"></div><div class="line">  Plug <span class="string">'ncm2/ncm2-bufword'</span></div><div class="line">  Plug <span class="string">'ncm2/ncm2-path'</span></div><div class="line">  Plug <span class="string">'ncm2/ncm2-jedi'</span></div><div class="line"></div><div class="line">  <span class="comment">" Formater</span></div><div class="line">  Plug <span class="string">'Chiel92/vim-autoformat'</span></div><div class="line"></div><div class="line"><span class="keyword">call</span> plug#end()</div><div class="line"></div><div class="line"><span class="keyword">filetype</span> plugin <span class="built_in">indent</span> <span class="keyword">on</span></div></pre></td></tr></table></figure>
<p>Then, close your neovim and reopen it, now neovim will load the setting above. And then we run the following command, neovim will install the plugins we put into <code>init.vim</code> above</p>
<blockquote>
<p><code>:PlugInstall</code></p>
</blockquote>
<img src="/2018/09/03/neovim-python/plugInstall.gif">
<p>After this, we paste the following content into our configuration file below the content showing above.</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div></pre></td><td class="code"><pre><div class="line"><span class="comment">" UI configuration</span></div><div class="line"><span class="keyword">syntax</span> <span class="keyword">on</span></div><div class="line"><span class="keyword">syntax</span> enable</div><div class="line"></div><div class="line"><span class="comment">" colorscheme</span></div><div class="line"><span class="keyword">let</span> base16colorspace=<span class="number">256</span></div><div class="line"><span class="keyword">colorscheme</span> base16-gruvbox-dark-hard</div><div class="line"><span class="keyword">set</span> background=dark</div><div class="line"></div><div class="line"><span class="comment">" True Color Support if it's avaiable in terminal</span></div><div class="line"><span class="keyword">if</span> <span class="built_in">has</span>(<span class="string">"termguicolors"</span>)</div><div class="line">    <span class="keyword">set</span> termguicolors</div><div class="line"><span class="keyword">endif</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> <span class="built_in">has</span>(<span class="string">"gui_running"</span>)</div><div class="line">  <span class="keyword">set</span> guicursor=n-v-<span class="keyword">c</span>-<span class="keyword">sm</span>:block,i-ci-<span class="keyword">ve</span>:block,r-<span class="keyword">cr</span>-<span class="keyword">o</span>:blocks</div><div class="line"><span class="keyword">endif</span></div><div class="line"></div><div class="line"><span class="keyword">set</span> <span class="keyword">number</span></div><div class="line"><span class="keyword">set</span> relativenumber</div><div class="line"></div><div class="line"><span class="keyword">set</span> hidden</div><div class="line"><span class="keyword">set</span> mouse=<span class="keyword">a</span></div><div class="line"><span class="keyword">set</span> noshowmode</div><div class="line"><span class="keyword">set</span> noshowmatch</div><div class="line"><span class="keyword">set</span> nolazyredraw</div><div class="line"></div><div class="line"><span class="comment">" Turn off backup</span></div><div class="line"><span class="keyword">set</span> nobackup</div><div class="line"><span class="keyword">set</span> noswapfile</div><div class="line"><span class="keyword">set</span> nowritebackup</div><div class="line"></div><div class="line"><span class="comment">" Search configuration</span></div><div class="line"><span class="keyword">set</span> ignorecase                    <span class="comment">" ignore case when searching</span></div><div class="line"><span class="keyword">set</span> smartcase                     <span class="comment">" turn on smartcase</span></div><div class="line"></div><div class="line"><span class="comment">" Tab and Indent configuration</span></div><div class="line"><span class="keyword">set</span> expandtab</div><div class="line"><span class="keyword">set</span> tabstop=<span class="number">4</span></div><div class="line"><span class="keyword">set</span> <span class="built_in">shiftwidth</span>=<span class="number">4</span></div><div class="line"></div><div class="line"><span class="comment">" vim-autoformat</span></div><div class="line"><span class="keyword">noremap</span> <span class="symbol">&lt;F3&gt;</span> :Autoformat<span class="symbol">&lt;CR&gt;</span></div><div class="line"></div><div class="line"><span class="comment">" NCM2</span></div><div class="line"> <span class="keyword">augroup</span> NCM2</div><div class="line">  autocmd!</div><div class="line">  <span class="comment">" enable ncm2 for all buffers</span></div><div class="line">  <span class="keyword">autocmd</span> BufEnter * <span class="keyword">call</span> ncm2#enable_for_buffer()</div><div class="line"></div><div class="line">  <span class="comment">" :help Ncm2PopupOpen for more information</span></div><div class="line">  <span class="keyword">set</span> completeopt=noinsert,menuone,noselect</div><div class="line"></div><div class="line">  <span class="comment">" When the &lt;Enter&gt; key is pressed while the popup menu is visible, it only</span></div><div class="line">  <span class="comment">" hides the menu. Use this mapping to close the menu and also start a new line.</span></div><div class="line"> <span class="keyword">inoremap</span> <span class="symbol">&lt;expr&gt;</span> <span class="symbol">&lt;CR&gt;</span> (<span class="built_in">pumvisible</span>() ? <span class="string">"\&lt;c-y&gt;\&lt;cr&gt;"</span> : <span class="string">"\&lt;CR&gt;"</span>)</div><div class="line"><span class="keyword">augroup</span> END</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">" Ale</span></div><div class="line"><span class="keyword">let</span> <span class="variable">g:ale_lint_on_enter</span> = <span class="number">0</span></div><div class="line"><span class="keyword">let</span> <span class="variable">g:ale_lint_on_text_changed</span> = <span class="string">'never'</span></div><div class="line"><span class="keyword">let</span> <span class="variable">g:ale_echo_msg_error_str</span> = <span class="string">'E'</span></div><div class="line"><span class="keyword">let</span> <span class="variable">g:ale_echo_msg_warning_str</span> = <span class="string">'W'</span></div><div class="line"><span class="keyword">let</span> <span class="variable">g:ale_echo_msg_format</span> = <span class="string">'[%linter%] %s [%severity%]'</span></div><div class="line"><span class="keyword">let</span> <span class="variable">g:ale_linters</span> = &#123;<span class="string">'python'</span>: [<span class="string">'flake8'</span>]&#125;</div><div class="line"></div><div class="line"><span class="comment">" Airline</span></div><div class="line"><span class="keyword">let</span> <span class="variable">g:airline_left_sep</span>  = <span class="string">''</span></div><div class="line"><span class="keyword">let</span> <span class="variable">g:airline_right_sep</span> = <span class="string">''</span></div><div class="line"><span class="keyword">let</span> <span class="variable">g:airline</span>#extensions#ale#enabled = <span class="number">1</span></div><div class="line"><span class="keyword">let</span> airline#extensions#ale#error_symbol = <span class="string">'E:'</span></div><div class="line"><span class="keyword">let</span> airline#extensions#ale#warning_symbol = <span class="string">'W:'</span></div></pre></td></tr></table></figure>
<p>Close neovim and reopen it again, then we have this</p>
<img src="/2018/09/03/neovim-python/new-neovim.png">
<h1 id="Code-completion-and-code-lint-formatting"><a href="#Code-completion-and-code-lint-formatting" class="headerlink" title="Code completion and code lint/formatting"></a>Code completion and code lint/formatting</h1><p>In order to have code completion, syntax checking, and code formatting, we need the following python packages</p>
<ul>
<li><code>jedi</code> for code completion: <code>pip install jedi</code></li>
<li><code>flake8</code> for code linting: <code>pip install flake8</code></li>
<li><code>autopep8</code> for code formatting: <code>pip install autopep8</code></li>
</ul>
<p>Then, we have our python coding environment in our neovim. Suppose we have the following python code,</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> numpy.random <span class="keyword">import</span> normal</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">simple_function</span><span class="params">(a, b, c=<span class="number">0</span>)</span>:</span></div><div class="line">    d = a + b</div><div class="line">    print(a + b + c)</div></pre></td></tr></table></figure>
<p>And neovim will display the following two errors/warnings:</p>
<img src="/2018/09/03/neovim-python/error-1.png">
<img src="/2018/09/03/neovim-python/error-2.png">
<p>So let’s fix them… note that we also have the autocompletion too!</p>
<img src="/2018/09/03/neovim-python/fix-1.gif">
<p>Notice that we have another error/warning showing stating that</p>
<blockquote>
<p>E231: missing whitespace after ‘,’</p>
</blockquote>
<p>Now if we run the following command</p>
<blockquote>
<p><code>:Autoformat</code> or hit <code>&lt;F3&gt;</code> since we mapped it in our configuration file</p>
</blockquote>
<p>we will notice that the error E231 is resolved after code reformatting.s</p>
<img src="/2018/09/03/neovim-python/fix-2.gif">
<p>since code linting and formatting rely on separate python uilities (<code>flake8</code> and <code>autopep8</code>), which are isolated from our editor. So we can set the behavior of them such as</p>
<ul>
<li><a href="http://flake8.pycqa.org/en/latest/user/configuration.html" target="_blank" rel="noopener">configure flake8</a> or <a href="https://pep8.readthedocs.io/en/release-1.7.x/intro.html#configuration" target="_blank" rel="noopener">configure autopep8</a> on<ul>
<li>max line length (say 100 instead of default value 79)</li>
<li>ignore particular warnings or errors</li>
</ul>
</li>
</ul>
</div></article><div class="post-tags"><a href="/tags/neovim/" class="post-tag"># neovim</a><a href="/tags/python/" class="post-tag"># python</a></div></div></main><footer><div class="paginator"><a href="/2016/10/30/ultisnips/" class="next">NEXT</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'yufanlu';
var disqus_identifier = '2018/09/03/neovim-python/';
var disqus_title = 'Setup Neovim as Python IDE';
var disqus_url = 'http://yufanlu.net/2018/09/03/neovim-python/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//yufanlu.disqus.com/count.js" async></script><div class="copyright"><p>© 2016 - 2018 <a href="http://yufanlu.net">Yufan Lu</a>. This is a personal weblog. All the information provided on yufanlu.net is expressed opinion of myself, Yufan Lu and not others. This includes (but is not limited to) my membership organizations and/or employers. Any notes or knowledge summaries posted serves as personal remainders and for personal reference purpose only (and they might be wrong). Before making any decisions or taking any actions, you should consult a professional adviser. Under no circumstances will I be liable for any loss or damages (including without limitation indirect or consequential loss or damages) or any loss or damages whatsoever arising from loss of data or profits arising out of or in connection with the use of this website.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-80837966-1",'auto');ga('send','pageview');</script></body></html>